<!doctype html>
<html lang="en">
  <head>
      <title>Swagger builder demo</title>

  <meta charset="utf-8">

  <!-- Forces IE to render in 'latest' compatible mode -->
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

    <!-- START: EXTRA-JS -->
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
  <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

  <script type="text/javascript"
          src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js">
  </script>
  <script type="text/javascript"
          src="calendar/jquery.datetimeentry.js">
  </script>
  <script type="text/javascript"
          src="calendar/jquery-ui-timepicker-addon-1.2.js">
  </script>
  <script type="text/javascript"
          src="js/iris-utils.js">
  </script>
  <script type="text/javascript"
          src="js/swagger-builder.js">
  </script>
  <script type="text/javascript"
          src="js/builder.js">
  </script>
  <script type="text/javascript"
          src="js/validator.js">
  </script>
  <!-- END: EXTRA-JS -->

  <!-- START: EXTRA-CSS -->
  <link rel="stylesheet" media="screen" type="text/css" href="css/iris.css" />

  <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.9.2.custom.css" />
  <link rel="stylesheet" type="text/css" href="css/services.css" />

  <link type="text/css"
        rel="stylesheet"
        media="screen"
        href="css/builder.css">
  <!-- END: EXTRA-CSS -->


  </head>
  <body>

    <div id="site-container">
      <div class="container">
      <div class="wrapper">
    <div id="page">
      <div class="row">
  <div class="col-xs-12">
              <div id="page-content">

  <!-- <div>
    <label>Pick a service:</label>
    <select id="service">
      <option>dmsp</option>
      <option>intermagnet</option>
      <option>rkgravitymag</option>
      <option>waterleveltides</option>
      <option>event</option>
    </select>
  </div>
  <script type="text/javascript">
    $(function() {
      var service = window.location.search.slice(1);
      if (service) {
        $("#service").val(service);
      }
      $("#service").change(function() {
        var service = $(this).val();
        window.location.search = "?" + service;
      });
    });
  </script> -->

                  <h1>
  URL Builder:
  <span id="operation-summary"></span>
  v.1
                  </h1>

                  <div id="content">

  <div class="row p-margin">
    <div class="col-xs-10">

<p id="operation-description"></p>

    </div>
    <div class="col-xs-2">
      <a href="#dialog" role="button" class="btn btn-default" data-toggle="modal"><i class="glyphicon glyphicon-question-sign"></i> Usage</a>
    </div>
  </div>

<h2 id="service-title"></h2>

<p id="service-description"></p>

  <!-- {{{ START: FORM -->

  <form id="builder-form"
        action=""
        method="get"
        class="form-inline">

  </form>

  <!-- }}} END: FORM -->

  <div class="alert alert-warning">
    <strong>Click the link:</strong>
    <p><a id="url" target="_blank"></a></p>
  </div>

  <div id="dialog"
       class="modal fade"
       tabindex="-1"
       role="dialog"
       aria-labelledby="myModalLabel"
       aria-hidden="true">
    <!-- {{{ START: HELP -->
    <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h3 id="myModalLabel">Usage</h3>
      </div>
      <div class="modal-body">
        <table class="table table-bordered table-striped table-condensed" id="usage-table">
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">Close</button>
      </div>
    </div>
    </div>
    <!-- }}} END: HELP  -->
  </div>

  <script type="text/javascript">
  var swaggerBuilder;
  $(function() {
    swaggerBuilder = new Builder.Builder({
      swaggerURL: "swagger-event.json",
      labelClass: "col-xs-3",
      fieldClass: "col-xs-9",
      parameters: {
        starttime: {
          label: "Start Time",
          builder: new Builder.DateBuilder()
        },
        endtime: {
          label: "End Time",
          builder: new Builder.DateBuilder()
        },
        minmag: {
          label: "Minimum Magnitude"
        },
        maxmag: {
          label: "Maximum Magnitude"
        },
        magtype: {
          label: "Magnitude Type",
          enum_labels: {
            "MB": "Body magnitude"
          }
        },
        format: {
          enum_labels: {
            xml: "XML (QuakeML)",
            text: "Text (CSV)"
          }
        }
      },
      /*
      layout: [
        new Builder.Columns(
          [
            new Builder.Fieldset("Date/Time", "starttime", "endtime"),
            new Builder.Fieldset("Magnitude", "minmag", "maxmag", "magtype")
          ],
          [
            new Builder.Fieldset("Location",
              new Builder.OptGroup(
                'location_type',
                ['All'],
                ['Lat/Lon Box', "maxlat", "maxlon", "minlat", "minlon" ],
                ['Lat/Lon Radius', "lat", "lon", "minradius", "maxradius" ]
              )
            )
          ]
        ),
        "format"
      ]
    */
    });
    swaggerBuilder.run().then(function() {
      // Init builder
      $("#builder-form").builder();
      $("#minmag-row").builder('dependsOn', $('#maxmag'));
    });
  });

  /*
  $(function() {
    // Init builder
    $("#builder-form").builder();
    $("#nodatapopover").popover({
      html:true,
      trigger:'hover',
    });
    // Updatedafter disabled by default
    $("#updatedafter").builder('dependsOn', $("#updatedafter-check"));
    // Disable all query-oriented rows if an event id is chosen
    $('div[id$="-row"]').not(
      '#includeallorigins-row, #includeallmagnitudes-row, #includearrivals-row, #eventid-row, #format-row'
     ).builder(
       'updateOnChange', $("#eventid")).builder(
         'dependsOn', function() {
           return $("#eventid").val() == '';
         });
    // Uncheck location radios if an event id is chosen
    $('input:radio[name="_loctype"]').builder(
      'updateOnChange', $("#eventid")).builder(
        'dependsOn', function() {
          return $("#eventid").val() == '';
      });
    // Location radio buttons depend on the row being enabled
    $('input:radio[name="_loctype"]').builder('dependsOn', $("#loc-row"));
    // Change in any radio button acts as a change in all of them
    $('input:radio[name="_loctype"]').builder('updateOnChange', $('input:radio[name="_loctype"]'));
    // Inputs in location-related subsections depend on the subsections themselves
    $("input", $("#locbox-field")).builder('dependsOn', $("#locbox-field"));
    $("input", $("#locradius-field")).builder('dependsOn', $("#locradius-field"));
  });
  */
  </script>

<!-- }}} END: WS-EVENT -->


                  </div>



              </div>


  </div>



      </div>

    </div>

      </div>


    <div id="footer">
    <div id="footer-bottom">
      <ul>
        <li><span><a href="http://www.iris.edu/hq" title="IRIS"><img src="http://service.iris.edu/static/img/layout/logos/URL_TXT.png" /></a></span></li>
        <li><em><a href="http://www.nsf.gov/" title="The National Science Foundation" target="_blank">Sponsored by the National Science Foundation</a></em></li>
        <li><a href="http://www.iris.edu/hq" title="IRIS">&copy; Copyright 2015 IRIS</a></li>
        <li>1200 New York Avenue NW, Suite 400, Washington, DC  20005,  202-682-2220</li>
        <li><a href="mailto:info@iris.edu">info@iris.edu</a></li>
      </ul>
    </div><!-- #footer-bottom -->
  </div><!-- #footer -->


      </div>
    </div><!-- #site-container -->

  </body>
</html>
